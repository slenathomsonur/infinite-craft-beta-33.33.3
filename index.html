<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Craft | Enhanced Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0, #d6d6d6);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333333;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        header {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 100%;
            position: relative;
            border: 2px solid #888888;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(100, 100, 100, 0.3);
            background: linear-gradient(to right, #666666, #999999);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            display: inline-block;
        }

        .beta-badge {
            position: absolute;
            top: -10px;
            right: -40px;
            background: #666666;
            color: white;
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: bold;
            transform: rotate(15deg);
            animation: pulse 2s infinite;
            border: 1px solid #888888;
        }

        @keyframes pulse {
            0%, 100% { transform: rotate(15deg) scale(1); }
            50% { transform: rotate(15deg) scale(1.1); }
        }

        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
            color: #666666;
        }

        .header-controls {
            position: absolute;
            right: 20px;
            top: 20px;
            display: flex;
            gap: 10px;
        }

        .header-btn {
            background: rgba(100, 100, 100, 0.1);
            color: #666666;
            border: 1px solid #888888;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .header-btn:hover {
            background: rgba(100, 100, 100, 0.2);
            transform: translateY(-2px);
        }

        .main-content {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .game-section {
            flex: 1;
            min-width: 1200px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 20px;
            border: 1px solid #888888;
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #666666;
            border-bottom: 2px solid #888888;
            padding-bottom: 5px;
        }

        /* Search Bar */
        .search-container {
            margin-bottom: 15px;
        }

        .search-bar {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #cccccc;
            border-radius: 8px;
            font-size: 1rem;
            background: #f9f9f9;
            transition: all 0.3s ease;
        }

        .search-bar:focus {
            outline: none;
            border-color: #666666;
            box-shadow: 0 0 0 2px rgba(100, 100, 100, 0.2);
        }

        /* Larger element containers */
        .elements-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            max-height: 500px;
            overflow-y: auto;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
            border: 1px solid #cccccc;
        }

        /* Larger elements */
        .element {
            background: linear-gradient(135deg, #f0f0f0 0%, #e8e8e8 100%);
            padding: 20px 15px;
            border-radius: 12px;
            text-align: center;
            cursor: grab;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            user-select: none;
            position: relative;
            border: 1px solid #cccccc;
            animation: float 3s ease-in-out infinite;
            color: #333333;
            font-size: 1.1rem;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .element:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .element:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        .element.view-only {
            cursor: pointer;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        .element.clickable {
            cursor: pointer;
        }

        .element.clickable:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, #e8e8e8 0%, #e0e0e0 100%);
        }

        .rarity-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #666666;
            color: white;
            font-size: 0.7rem;
            padding: 2px 5px;
            border-radius: 10px;
            font-weight: bold;
            border: 1px solid #888888;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 5px #666666; }
            to { box-shadow: 0 0 15px #888888; }
        }

        .common { background: linear-gradient(135deg, #f0f0f0, #e8e8e8); }
        .uncommon { background: linear-gradient(135deg, #e8e8e8, #e0e0e0); }
        .rare { background: linear-gradient(135deg, #e0e0e0, #d8d8d8); }
        .epic { background: linear-gradient(135deg, #d8d8d8, #d0d0d0); }
        .legendary { background: linear-gradient(135deg, #d0d0d0, #c8c8c8); }
        .mythical { background: linear-gradient(45deg, #c8c8c8, #c0c0c0); }
        .dem-studios { background: linear-gradient(45deg, #333333, #666666); color: white; }
        .studio-14592 { background: linear-gradient(45deg, #555555, #777777); color: white; }
        .gold { background: linear-gradient(45deg, #d4af37, #ffd700); color: #333333; }
        .diamond { background: linear-gradient(45deg, #e8e8e8, #f0f0f0); color: #333333; }
        .elemental { background: linear-gradient(45deg, #d0d0d0, #d8d8d8); color: #333333; }

        .discovery-area {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        /* Make discovery boxes larger */
        .discovery-box {
            flex: 1;
            min-width: 300px;
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #cccccc;
            transition: all 0.3s ease;
        }

        .discovery-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .combine-area {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .drop-zone {
            width: 120px;
            height: 120px;
            border: 3px dashed #888888;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            color: #888888;
            position: relative;
            transition: all 0.3s ease;
            animation: pulse-border 2s ease-in-out infinite;
            background: #f9f9f9;
        }

        @keyframes pulse-border {
            0%, 100% { border-color: #888888; }
            50% { border-color: #aaaaaa; }
        }

        .drop-zone.active {
            background: rgba(100, 100, 100, 0.1);
            transform: scale(1.05);
        }

        .drop-zone .clear-btn {
            position: absolute;
            top: -5px;
            right: -5px;
            background: rgba(200, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            cursor: pointer;
            display: none;
            transition: all 0.3s ease;
        }

        .drop-zone .clear-btn:hover {
            transform: scale(1.2);
            background: rgba(200, 0, 0, 0.9);
        }

        .drop-zone.has-element .clear-btn {
            display: block;
        }

        .combine-btn {
            background: linear-gradient(to right, #666666, #888888);
            color: white;
            border: 1px solid #666666;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: 600;
            transition: all 0.3s ease;
            width: auto;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { 
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
                transform: translateY(0);
            }
            50% { 
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                transform: translateY(-3px);
            }
        }

        .combine-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            background: linear-gradient(to right, #555555, #777777);
        }

        .combine-btn:active {
            transform: translateY(0) scale(0.95);
        }

        .result-area {
            text-align: center;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 1px solid #cccccc;
            transition: all 0.3s ease;
        }

        .result-area.success {
            background: rgba(0, 200, 0, 0.1);
            border-color: #00aa00;
            animation: success-pulse 0.5s ease-in-out;
        }

        @keyframes success-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .new-element {
            font-size: 1.5rem;
            color: #666666;
            font-weight: bold;
            margin-top: 10px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            transition: all 0.3s ease;
        }

        .error {
            background: rgba(200, 0, 0, 0.1);
            border: 1px solid #cc0000;
            animation: shake 0.5s ease-in-out;
            color: #990000;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .success {
            background: rgba(0, 200, 0, 0.1);
            border: 1px solid #00aa00;
            animation: bounce 0.5s ease-in-out;
            color: #006600;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
            border: 1px solid #cccccc;
        }

        .stat-item {
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-3px);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #666666;
            animation: count-up 1s ease-out;
        }

        @keyframes count-up {
            from { 
                opacity: 0;
                transform: scale(0.5);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }

        button {
            background: linear-gradient(to right, #666666, #888888);
            color: white;
            border: 1px solid #666666;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 5px;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background: linear-gradient(to right, #555555, #777777);
        }

        button:active {
            transform: translateY(0);
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #666666;
            font-size: 0.9rem;
            width: 100%;
        }

        /* Element Tooltip */
        .element-tooltip {
            position: absolute;
            background: rgba(50, 50, 50, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            z-index: 1000;
            max-width: 200px;
            border: 1px solid #666666;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .element:hover .element-tooltip {
            opacity: 1;
        }

        /* Special Effects */
        .special-effects {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(3) rotate(360deg);
                opacity: 0;
            }
        }

        /* Rainbow Effect */
        .rainbow-mode {
            animation: rainbow 2s infinite;
        }

        @keyframes rainbow {
            0% { background: linear-gradient(135deg, #ff0000, #ff9900); }
            20% { background: linear-gradient(135deg, #ff9900, #ffff00); }
            40% { background: linear-gradient(135deg, #ffff00, #00ff00); }
            60% { background: linear-gradient(135deg, #00ff00, #0099ff); }
            80% { background: linear-gradient(135deg, #0099ff, #6633ff); }
            100% { background: linear-gradient(135deg, #6633ff, #ff0000); }
        }

        /* Dice Roll Section */
        .dice-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            border: 2px solid #888888;
            text-align: center;
        }

        /* Bigger Dice */
        .dice-container {
            font-size: 6rem;
            margin: 20px 0;
            animation: dice-spin 0.5s ease-in-out;
        }

        @keyframes dice-spin {
            0% { transform: rotate(0deg) scale(0.5); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .dice-btn {
            width: auto !important;
            padding: 15px 40px !important;
            font-size: 1.2rem !important;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        .dice-timer {
            margin-top: 10px;
            font-size: 1rem;
            color: #666666;
            transition: all 0.3s ease;
        }

        /* Quick Craft Section */
        .quick-craft {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            border: 1px solid #888888;
        }

        .quick-craft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .quick-craft-item {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #cccccc;
            animation: slide-up 0.5s ease-out;
            color: #333333;
        }

        @keyframes slide-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quick-craft-item:hover {
            background: #f0f0f0;
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .quick-craft-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quick-craft-item.disabled:hover {
            transform: none;
            background: #f9f9f9;
        }

        /* Achievements Section */
        .achievements-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            border: 1px solid #888888;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .achievement {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #cccccc;
            transition: all 0.3s ease;
        }

        .achievement.unlocked {
            background: linear-gradient(135deg, #e8f5e8, #d0f0d0);
            border-color: #00aa00;
        }

        .achievement h4 {
            color: #666666;
            margin-bottom: 5px;
        }

        .achievement p {
            font-size: 0.9rem;
            color: #888888;
        }

        /* Crafting History */
        .history-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            border: 1px solid #888888;
        }

        .history-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .history-item {
            padding: 8px 12px;
            border-bottom: 1px solid #eeeeee;
            font-size: 0.9rem;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        /* Dice Card */
        .dice-card {
            background: linear-gradient(135deg, #f0f0f0, #e8e8e8);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 10px 0;
            border: 1px solid #cccccc;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            animation: slideIn 0.5s ease-out;
        }

        .dice-card h4 {
            color: #666666;
            margin-bottom: 5px;
        }

        .dice-card p {
            font-size: 0.9rem;
            color: #888888;
        }

        .dice-card .use-btn {
            margin-top: 10px;
            padding: 5px 10px;
            font-size: 0.8rem;
            width: auto;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .game-section {
                min-width: 100%;
            }
            
            .header-controls {
                position: static;
                margin-top: 15px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Infinite Craft<span class="beta-badge">BETA</span></h1>
            <p class="tagline">Combine elements to create the universe! No account needed.</p>
            <div class="header-controls">
                <button class="header-btn" id="export-btn">Export Data</button>
                <button class="header-btn" id="reset-btn">Reset Progress</button>
            </div>
        </header>

        <div class="main-content">
            <section class="game-section">
                <h2 class="section-title">Infinite Craft</h2>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="total-elements">12</div>
                        <div>Total Elements</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="user-elements">12</div>
                        <div>Your Elements</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="combinations">0</div>
                        <div>Combinations</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="session-score">0</div>
                        <div>Session Score</div>
                    </div>
                </div>
                
                <div class="discovery-area">
                    <div class="discovery-box">
                        <h3 class="section-title">Your Elements (Drag or Click)</h3>
                        <div class="search-container">
                            <input type="text" class="search-bar" id="element-search" placeholder="Search elements...">
                        </div>
                        <div class="elements-container" id="user-elements-container">
                            <!-- Elements will be added here dynamically -->
                        </div>
                    </div>
                    
                    <div class="discovery-box">
                        <h3 class="section-title">All Elements (View Only)</h3>
                        <div class="elements-container" id="all-elements-container">
                            <!-- Elements will be added here dynamically -->
                        </div>
                    </div>
                </div>
                
                <div class="combine-area">
                    <div class="drop-zone" id="drop-zone-1">
                        +
                        <button class="clear-btn">X</button>
                    </div>
                    <div class="drop-zone" id="drop-zone-2">
                        +
                        <button class="clear-btn">X</button>
                    </div>
                    <button class="combine-btn" id="combine-btn">Combine!</button>
                </div>
                
                <div class="result-area">
                    <h3>Combination Result</h3>
                    <div id="result-message">Drag two elements to the boxes above and click Combine!</div>
                    <div id="new-element" class="new-element"></div>
                </div>
            </section>
        </div>
        
        <!-- Quick Craft Section -->
        <section class="quick-craft">
            <h2 class="section-title">Quick Craft</h2>
            <p>Click on any recipe below to automatically add the required elements to your crafting area</p>
            <div class="quick-craft-grid" id="quick-craft-container">
                <!-- Quick craft items will be added here dynamically -->
            </div>
        </section>
        
        <!-- Achievements Section -->
        <section class="achievements-section">
            <h2 class="section-title">Achievements</h2>
            <div class="achievements-grid" id="achievements-container">
                <!-- Achievements will be added here dynamically -->
            </div>
        </section>
        
        <!-- Crafting History Section -->
        <section class="history-section">
            <h2 class="section-title">Crafting History</h2>
            <div class="history-list" id="history-container">
                <!-- Crafting history will be added here dynamically -->
            </div>
        </section>
        
        <!-- Dice Roll Section -->
        <section class="dice-section">
            <h2 class="section-title">Lucky Dice</h2>
            <p>Roll the dice every 10 seconds for a chance to get special rewards!</p>
            <div class="dice-container" id="dice-result">🎲</div>
            <button class="dice-btn" id="dice-btn">Roll Dice</button>
            <div class="dice-timer" id="dice-timer">Ready to roll!</div>
            <div id="dice-cards-container">
                <!-- Dice cards will appear here -->
            </div>
        </section>
        
        <footer>
            <p>&copy; 2025 Dem Studios. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // Game data with expanded starter elements
        const starterElements = [
            { name: 'Earth', rarity: 'common', description: 'The solid ground beneath our feet' },
            { name: 'Fire', rarity: 'common', description: 'The element of heat and energy' },
            { name: 'Water', rarity: 'common', description: 'The source of all life' },
            { name: 'Wind', rarity: 'common', description: 'The invisible force that moves the air' },
            { name: 'Life', rarity: 'uncommon', description: 'The essence of living beings' },
            { name: 'Energy', rarity: 'uncommon', description: 'Pure potential and power' },
            { name: 'Time', rarity: 'rare', description: 'The fourth dimension' },
            { name: 'Space', rarity: 'rare', description: 'The final frontier' },
            { name: 'Light', rarity: 'uncommon', description: 'The fastest thing in the universe' },
            { name: 'Dark', rarity: 'uncommon', description: 'The absence of light' },
            { name: 'Dog', rarity: 'rare', description: 'Mans best friend' },
            { name: 'Parrot', rarity: 'rare', description: 'A colorful talking bird' }
        ];

        // Expanded combinations
        const combinations = {
            // Basic combinations
            'Earth+Fire': { name: 'Lava', rarity: 'uncommon', description: 'Molten rock from deep within the earth' },
            'Earth+Water': { name: 'Mud', rarity: 'common', description: 'Wet earth that sticks to everything' },
            'Earth+Wind': { name: 'Dust', rarity: 'common', description: 'Fine particles carried by the wind' },
            'Fire+Water': { name: 'Steam', rarity: 'common', description: 'Water vapor created by heat' },
            'Fire+Wind': { name: 'Smoke', rarity: 'common', description: 'The visible result of combustion' },
            'Water+Wind': { name: 'Wave', rarity: 'common', description: 'The motion of water across the surface' },
            'Life+Earth': { name: 'Plant', rarity: 'uncommon', description: 'Living organisms that grow in soil' },
            'Life+Water': { name: 'Algae', rarity: 'uncommon', description: 'Simple aquatic organisms' },
            'Life+Fire': { name: 'Phoenix', rarity: 'epic', description: 'A mythical bird that rises from ashes' },
            'Life+Wind': { name: 'Butterfly', rarity: 'rare', description: 'A beautiful insect that flies with the wind' },
            'Energy+Earth': { name: 'Earthquake', rarity: 'rare', description: 'The shaking of the ground caused by energy release' },
            'Energy+Fire': { name: 'Plasma', rarity: 'rare', description: 'The fourth state of matter, superheated gas' },
            'Energy+Water': { name: 'Electric Eel', rarity: 'rare', description: 'A creature that generates electricity' },
            'Energy+Wind': { name: 'Storm', rarity: 'uncommon', description: 'Atmospheric disturbance with wind and energy' },
            'Dog+Earth': { name: 'Burrow', rarity: 'uncommon', description: 'A hole dug by an animal for shelter' },
            'Dog+Water': { name: 'Swimming Dog', rarity: 'rare', description: 'A canine that enjoys the water' },
            'Dog+Fire': { name: 'Hot Dog', rarity: 'epic', description: 'A delicious cooked sausage' },
            'Dog+Wind': { name: 'Flying Dog', rarity: 'legendary', description: 'A mythical canine that soars through the air' },
            'Parrot+Earth': { name: 'Ground Parrot', rarity: 'uncommon', description: 'A parrot that prefers walking to flying' },
            'Parrot+Water': { name: 'Pirate Parrot', rarity: 'rare', description: 'A seafaring bird with an eye patch' },
            'Parrot+Fire': { name: 'Phoenix Parrot', rarity: 'epic', description: 'A fiery bird with colorful plumage' },
            'Parrot+Wind': { name: 'Flying Parrot', rarity: 'common', description: 'A parrot soaring through the sky' },
            
            // Special Dem Studios combinations
            'Dog+Parrot': { name: 'Dem Studios', rarity: 'dem-studios', description: 'The legendary game development studio!' },
            'Mud+Dog': { name: '14592 Studios', rarity: 'studio-14592', description: 'A mysterious studio with magical powers' },
            'Dem Studios+14592 Studios': { 
                name: 'Ultimate Studio', 
                rarity: 'dem-studios', 
                description: 'The ultimate creative powerhouse',
                specialEffect: 'rainbow'
            },
            
            // Time and Space combinations
            'Time+Space': { name: 'Universe', rarity: 'mythical', description: 'Everything that exists' },
            'Time+Fire': { name: 'Age', rarity: 'uncommon', description: 'The progression of existence' },
            'Time+Water': { name: 'River of Time', rarity: 'epic', description: 'The eternal flow of moments' },
            'Time+Wind': { name: 'Eternal Breeze', rarity: 'rare', description: 'Wind that blows through all ages' },
            'Space+Fire': { name: 'Star', rarity: 'epic', description: 'A massive ball of burning gas' },
            'Space+Water': { name: 'Comet', rarity: 'rare', description: 'An icy visitor from deep space' },
            'Space+Wind': { name: 'Solar Wind', rarity: 'uncommon', description: 'Stream of charged particles from the sun' },
            
            // Light and Dark combinations
            'Light+Dark': { name: 'Twilight', rarity: 'rare', description: 'The magical time between day and night' },
            'Light+Fire': { name: 'Laser', rarity: 'rare', description: 'Concentrated beam of light' },
            'Light+Water': { name: 'Rainbow', rarity: 'uncommon', description: 'Multicolored arc in the sky' },
            'Light+Wind': { name: 'Aurora', rarity: 'epic', description: 'Dancing lights in the polar sky' },
            'Dark+Fire': { name: 'Shadow Flame', rarity: 'legendary', description: 'Fire that consumes light itself' },
            'Dark+Water': { name: 'Abyssal Ocean', rarity: 'epic', description: 'The deepest, darkest waters' },
            'Dark+Wind': { name: 'Night Breeze', rarity: 'uncommon', description: 'The wind that whispers in darkness' },
            
            // More complex combinations
            'Lava+Water': { name: 'Stone', rarity: 'common', description: 'Solidified molten rock' },
            'Lava+Wind': { name: 'Obsidian', rarity: 'rare', description: 'Volcanic glass formed by rapid cooling' },
            'Plant+Water': { name: 'Swamp', rarity: 'uncommon', description: 'A wetland ecosystem' },
            'Plant+Fire': { name: 'Ash', rarity: 'common', description: 'The residue left after burning' },
            'Plant+Wind': { name: 'Dandelion', rarity: 'uncommon', description: 'A flower whose seeds travel on the wind' },
            'Storm+Water': { name: 'Hurricane', rarity: 'rare', description: 'A powerful tropical cyclone' },
            'Storm+Fire': { name: 'Lightning Storm', rarity: 'epic', description: 'An electrical storm with fire and energy' },
            'Stone+Fire': { name: 'Metal', rarity: 'uncommon', description: 'Mined and refined from ore' },
            'Stone+Water': { name: 'Sand', rarity: 'common', description: 'Tiny particles of eroded rock' },
            'Metal+Water': { name: 'Rust', rarity: 'common', description: 'Oxidized metal' },
            'Metal+Fire': { name: 'Molten Metal', rarity: 'rare', description: 'Liquid metal at high temperatures' },
            'Sand+Fire': { name: 'Glass', rarity: 'uncommon', description: 'Transparent material made from melted sand' },
            'Sand+Wind': { name: 'Sandstorm', rarity: 'rare', description: 'A storm of blowing sand' },
            'Phoenix+Fire': { name: 'Rebirth', rarity: 'legendary', description: 'The cycle of death and renewal' },
            'Lightning Storm+Earth': { name: 'Volcano', rarity: 'epic', description: 'A mountain that erupts with lava' },
            'Swamp+Life': { name: 'Frog', rarity: 'uncommon', description: 'An amphibian that lives in wetlands' },
            'Frog+Prince': { name: 'Royal Frog', rarity: 'mythical', description: 'A frog with royal lineage' },
            'Royal Frog+Castle': { name: 'Fairy Tale', rarity: 'mythical', description: 'A story of magic and wonder' },
            'Steam+Energy': { name: 'Engine', rarity: 'rare', description: 'A machine that converts energy to motion' },
            'Engine+Metal': { name: 'Car', rarity: 'uncommon', description: 'A wheeled vehicle for transportation' },
            'Car+Car': { name: 'Traffic', rarity: 'common', description: 'The bane of modern existence' },
            
            // Gold versions
            'Earth+Gold': { name: 'Golden Earth', rarity: 'gold', description: 'Earth infused with golden energy' },
            'Fire+Gold': { name: 'Golden Fire', rarity: 'gold', description: 'Fire that burns with golden flames' },
            'Water+Gold': { name: 'Golden Water', rarity: 'gold', description: 'Water that flows with golden light' },
            'Life+Gold': { name: 'Golden Life', rarity: 'gold', description: 'Life essence enhanced with gold' },
            
            // Diamond versions
            'Earth+Diamond': { name: 'Diamond Earth', rarity: 'diamond', description: 'Earth crystallized into diamond form' },
            'Fire+Diamond': { name: 'Diamond Fire', rarity: 'diamond', description: 'Fire that burns with diamond intensity' },
            'Water+Diamond': { name: 'Diamond Water', rarity: 'diamond', description: 'Water that flows like liquid diamond' },
            'Life+Diamond': { name: 'Diamond Life', rarity: 'diamond', description: 'Life essence crystallized into diamond' },
            
            // Elemental combinations
            'Dragon+Super Gold Diamond': { name: 'Elemental', rarity: 'elemental', description: 'The ultimate elemental being, combining all forces of nature' },
        };

        // Quick Craft Recipes
        const quickCraftRecipes = [
            { name: 'Lava', elements: ['Earth', 'Fire'], description: 'Create molten rock' },
            { name: 'Mud', elements: ['Earth', 'Water'], description: 'Make wet earth' },
            { name: 'Steam', elements: ['Fire', 'Water'], description: 'Generate water vapor' },
            { name: 'Plant', elements: ['Earth', 'Life'], description: 'Grow living organisms' },
            { name: 'Dem Studios', elements: ['Dog', 'Parrot'], description: 'Create the legendary studio' },
            { name: '14592 Studios', elements: ['Mud', 'Dog'], description: 'Discover the mysterious studio' },
            { name: 'Universe', elements: ['Time', 'Space'], description: 'Create everything that exists' },
            { name: 'Rainbow', elements: ['Light', 'Water'], description: 'Make a colorful arc in the sky' },
            { name: 'Star', elements: ['Space', 'Fire'], description: 'Create a massive ball of burning gas' },
            { name: 'Storm', elements: ['Energy', 'Wind'], description: 'Generate atmospheric disturbance' },
        ];

        // Achievements
        const achievements = [
            { id: 'first_combination', name: 'First Combination', description: 'Successfully combine two elements for the first time', unlocked: false },
            { id: 'five_elements', name: 'Element Collector', description: 'Discover 5 different elements', unlocked: false },
            { id: 'ten_elements', name: 'Element Master', description: 'Discover 10 different elements', unlocked: false },
            { id: 'dem_studios', name: 'Studio Founder', description: 'Create Dem Studios', unlocked: false },
            { id: 'rainbow_mode', name: 'Rainbow Master', description: 'Unlock rainbow mode', unlocked: false },
            { id: 'epic_element', name: 'Epic Crafter', description: 'Create an epic element', unlocked: false },
            { id: 'legendary_element', name: 'Legendary Crafter', description: 'Create a legendary element', unlocked: false },
            { id: 'mythical_element', name: 'Mythical Crafter', description: 'Create a mythical element', unlocked: false },
        ];

        // Dice rewards
        const diceRewards = [
            { name: 'Mystery Element', element: 'Mystery', rarity: 'rare', description: 'A mysterious element from the dice roll' },
            { name: 'Double XP', type: 'xp', value: 50, description: 'Gain 50 XP' },
            { name: 'Rare Element', element: 'Crystal', rarity: 'rare', description: 'A beautiful crystalline structure' },
            { name: 'Bonus Points', type: 'points', value: 25, description: 'Get 25 bonus points' },
            { name: 'Epic Element', element: 'Dragon', rarity: 'epic', description: 'A mythical fire-breathing creature' },
            { name: 'Lucky Charm', type: 'charm', value: 1, description: 'Increases your chances of rare combinations' },
            { name: 'Gold Element', element: 'Gold', rarity: 'gold', description: 'Pure elemental gold' },
            { name: 'Diamond Element', element: 'Diamond', rarity: 'diamond', description: 'The hardest natural material' },
            { name: 'Super Gold Diamond', element: 'Super Gold Diamond', rarity: 'diamond', description: 'An ultra-rare combination of gold and diamond' }
        ];

        // Game state
        let gameState = {
            userElements: [],
            discoveredElements: [],
            combinationsMade: 0,
            score: 0,
            xp: 0,
            level: 1,
            diceRolls: [],
            lastDiceRoll: 0,
            sessionScore: 0,
            rainbowMode: false,
            achievements: [],
            craftingHistory: []
        };

        // DOM elements
        const userElementsContainer = document.getElementById('user-elements-container');
        const allElementsContainer = document.getElementById('all-elements-container');
        const dropZone1 = document.getElementById('drop-zone-1');
        const dropZone2 = document.getElementById('drop-zone-2');
        const combineBtn = document.getElementById('combine-btn');
        const resultMessage = document.getElementById('result-message');
        const newElementDisplay = document.getElementById('new-element');
        const diceBtn = document.getElementById('dice-btn');
        const diceTimer = document.getElementById('dice-timer');
        const diceCardsContainer = document.getElementById('dice-cards-container');
        const exportBtn = document.getElementById('export-btn');
        const resetBtn = document.getElementById('reset-btn');
        const quickCraftContainer = document.getElementById('quick-craft-container');
        const achievementsContainer = document.getElementById('achievements-container');
        const historyContainer = document.getElementById('history-container');
        const elementSearch = document.getElementById('element-search');

        // Stats elements
        const totalElementsEl = document.getElementById('total-elements');
        const userElementsEl = document.getElementById('user-elements');
        const combinationsEl = document.getElementById('combinations');
        const sessionScoreEl = document.getElementById('session-score');

        // Initialize game
        function initGame() {
            loadGameState();
            renderElements();
            renderQuickCraft();
            renderAchievements();
            renderHistory();
            updateStats();
            setupEventListeners();
            updateDiceTimer();
            
            // Apply rainbow mode if active
            if (gameState.rainbowMode) {
                activateRainbowMode();
            }
        }

        // Set up event listeners
        function setupEventListeners() {
            // Combine button
            combineBtn.addEventListener('click', combineElements);
            
            // Dice button
            diceBtn.addEventListener('click', rollDice);
            
            // Clear buttons for drop zones
            dropZone1.querySelector('.clear-btn').addEventListener('click', () => clearDropZone(dropZone1));
            dropZone2.querySelector('.clear-btn').addEventListener('click', () => clearDropZone(dropZone2));
            
            // Header buttons
            exportBtn.addEventListener('click', exportGameData);
            resetBtn.addEventListener('click', resetGame);
            
            // Search functionality
            elementSearch.addEventListener('input', filterElements);
            
            // Drag and drop events
            setupDragAndDrop();
        }

        // Filter elements based on search
        function filterElements() {
            const searchTerm = elementSearch.value.toLowerCase();
            const elements = userElementsContainer.querySelectorAll('.element');
            
            elements.forEach(element => {
                const elementName = element.textContent.toLowerCase();
                if (elementName.includes(searchTerm)) {
                    element.style.display = 'flex';
                } else {
                    element.style.display = 'none';
                }
            });
        }

        // Set up drag and drop functionality
        function setupDragAndDrop() {
            // Allow drop
            [dropZone1, dropZone2].forEach(zone => {
                zone.addEventListener('dragover', e => {
                    e.preventDefault();
                    zone.classList.add('active');
                });
                
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('active');
                });
                
                zone.addEventListener('drop', e => {
                    e.preventDefault();
                    zone.classList.remove('active');
                    
                    const elementName = e.dataTransfer.getData('text/plain');
                    if (elementName) {
                        addElementToDropZone(zone, elementName);
                    }
                });
            });
        }

        // Add element to drop zone
        function addElementToDropZone(zone, elementName) {
            if (zone.querySelector('.element')) {
                clearDropZone(zone);
            }
            
            const element = createElement(elementName, false);
            zone.appendChild(element);
            zone.classList.add('has-element');
            
            // Make element draggable from drop zone
            element.setAttribute('draggable', 'true');
            element.addEventListener('dragstart', e => {
                e.dataTransfer.setData('text/plain', elementName);
            });
        }

        // Clear drop zone
        function clearDropZone(zone) {
            const element = zone.querySelector('.element');
            if (element) {
                element.remove();
            }
            zone.classList.remove('has-element');
        }

        // Combine elements
        function combineElements() {
            const element1 = dropZone1.querySelector('.element');
            const element2 = dropZone2.querySelector('.element');
            
            if (!element1 || !element2) {
                showMessage('Please add two elements to combine', 'error');
                return;
            }
            
            const name1 = element1.textContent;
            const name2 = element2.textContent;
            
            // Try both combinations
            const combination1 = `${name1}+${name2}`;
            const combination2 = `${name2}+${name1}`;
            
            let result = combinations[combination1] || combinations[combination2];
            
            if (result) {
                // Success - new element created
                const newElement = result.name;
                
                // Check if already discovered
                if (!gameState.discoveredElements.includes(newElement)) {
                    gameState.discoveredElements.push(newElement);
                    gameState.userElements.push({
                        name: newElement,
                        rarity: result.rarity,
                        description: result.description
                    });
                    
                    // Add XP based on rarity
                    const xpGained = getXpForRarity(result.rarity);
                    addXp(xpGained);
                    
                    // Add score
                    const scoreGained = getScoreForRarity(result.rarity);
                    gameState.score += scoreGained;
                    gameState.sessionScore += scoreGained;
                    
                    // Add to crafting history
                    gameState.craftingHistory.unshift({
                        elements: [name1, name2],
                        result: newElement,
                        timestamp: new Date().toLocaleTimeString()
                    });
                    
                    // Keep only last 10 history items
                    if (gameState.craftingHistory.length > 10) {
                        gameState.craftingHistory.pop();
                    }
                    
                    showMessage(`Success! You created ${newElement}`, 'success');
                    newElementDisplay.textContent = newElement;
                    
                    // Check for special effects
                    if (result.specialEffect === 'rainbow') {
                        activateRainbowMode();
                        gameState.rainbowMode = true;
                        showMessage('AMAZING! You unlocked Rainbow Mode!', 'success');
                    }
                    
                    // Check achievements
                    checkAchievements();
                    
                    // Add special effects
                    createSpecialEffects();
                } else {
                    showMessage(`You already have ${newElement}`, 'error');
                    newElementDisplay.textContent = '';
                }
                
                gameState.combinationsMade++;
                updateStats();
                renderElements();
                renderHistory();
                
                // Clear drop zones
                clearDropZone(dropZone1);
                clearDropZone(dropZone2);
            } else {
                // No combination found
                showMessage('These elements cannot be combined', 'error');
                newElementDisplay.textContent = '';
            }
        }

        // Check and unlock achievements
        function checkAchievements() {
            // First combination
            if (gameState.combinationsMade === 1 && !gameState.achievements.includes('first_combination')) {
                gameState.achievements.push('first_combination');
                showMessage('Achievement Unlocked: First Combination!', 'success');
            }
            
            // Element collector
            if (gameState.userElements.length >= 5 && !gameState.achievements.includes('five_elements')) {
                gameState.achievements.push('five_elements');
                showMessage('Achievement Unlocked: Element Collector!', 'success');
            }
            
            // Element master
            if (gameState.userElements.length >= 10 && !gameState.achievements.includes('ten_elements')) {
                gameState.achievements.push('ten_elements');
                showMessage('Achievement Unlocked: Element Master!', 'success');
            }
            
            // Dem Studios
            if (gameState.discoveredElements.includes('Dem Studios') && !gameState.achievements.includes('dem_studios')) {
                gameState.achievements.push('dem_studios');
                showMessage('Achievement Unlocked: Studio Founder!', 'success');
            }
            
            // Rainbow mode
            if (gameState.rainbowMode && !gameState.achievements.includes('rainbow_mode')) {
                gameState.achievements.push('rainbow_mode');
                showMessage('Achievement Unlocked: Rainbow Master!', 'success');
            }
            
            // Epic element
            const hasEpic = gameState.userElements.some(el => el.rarity === 'epic');
            if (hasEpic && !gameState.achievements.includes('epic_element')) {
                gameState.achievements.push('epic_element');
                showMessage('Achievement Unlocked: Epic Crafter!', 'success');
            }
            
            renderAchievements();
        }

        // Activate rainbow mode
        function activateRainbowMode() {
            document.body.classList.add('rainbow-mode');
            
            // Add rainbow effect to all elements
            const allElements = document.querySelectorAll('.element');
            allElements.forEach(element => {
                element.classList.add('rainbow-mode');
            });
            
            // Add rainbow effect to drop zones
            const dropZones = document.querySelectorAll('.drop-zone');
            dropZones.forEach(zone => {
                zone.classList.add('rainbow-mode');
            });
            
            // Add rainbow effect to combine button
            combineBtn.classList.add('rainbow-mode');
        }

        // Get XP for rarity
        function getXpForRarity(rarity) {
            switch(rarity) {
                case 'common': return 5;
                case 'uncommon': return 10;
                case 'rare': return 20;
                case 'epic': return 40;
                case 'legendary': return 80;
                case 'mythical': return 160;
                case 'gold': return 200;
                case 'diamond': return 400;
                case 'elemental': return 1000;
                case 'dem-studios': return 200;
                case 'studio-14592': return 200;
                default: return 5;
            }
        }

        // Get score for rarity
        function getScoreForRarity(rarity) {
            switch(rarity) {
                case 'common': return 1;
                case 'uncommon': return 2;
                case 'rare': return 5;
                case 'epic': return 10;
                case 'legendary': return 25;
                case 'mythical': return 50;
                case 'gold': return 100;
                case 'diamond': return 250;
                case 'elemental': return 1000;
                case 'dem-studios': return 100;
                case 'studio-14592': return 100;
                default: return 1;
            }
        }

        // Add XP and handle level ups
        function addXp(amount) {
            gameState.xp += amount;
            const xpForNextLevel = gameState.level * 100;
            
            if (gameState.xp >= xpForNextLevel) {
                gameState.level++;
                gameState.xp = gameState.xp - xpForNextLevel;
                showMessage(`Level Up! You reached level ${gameState.level}`, 'success');
            }
        }

        // Roll dice
        function rollDice() {
            const now = Date.now();
            const timeSinceLastRoll = now - gameState.lastDiceRoll;
            
            // Check if 10 seconds have passed
            if (timeSinceLastRoll < 10000 && gameState.lastDiceRoll !== 0) {
                const timeLeft = 10000 - timeSinceLastRoll;
                const secondsLeft = Math.ceil(timeLeft / 1000);
                showMessage(`Please wait ${secondsLeft} second(s) before rolling again`, 'error');
                return;
            }
            
            // Roll the dice
            const diceResult = Math.floor(Math.random() * 6) + 1;
            const reward = diceRewards[Math.floor(Math.random() * diceRewards.length)];
            
            // Update game state
            gameState.lastDiceRoll = now;
            gameState.diceRolls.push({
                time: now,
                result: diceResult,
                reward: reward.name
            });
            
            // Show dice animation
            const diceResultEl = document.getElementById('dice-result');
            diceResultEl.textContent = getDiceEmoji(diceResult);
            diceResultEl.style.animation = 'none';
            setTimeout(() => {
                diceResultEl.style.animation = 'dice-spin 0.5s ease-in-out';
            }, 10);
            
            // Process reward
            processDiceReward(reward);
            
            // Update timer
            updateDiceTimer();
            
            // Save game state
            saveGameState();
        }

        // Get dice emoji
        function getDiceEmoji(value) {
            switch(value) {
                case 1: return '⚀';
                case 2: return '⚁';
                case 3: return '⚂';
                case 4: return '⚃';
                case 5: return '⚄';
                case 6: return '⚅';
                default: return '🎲';
            }
        }

        // Process dice reward
        function processDiceReward(reward) {
            // Create reward card
            const card = document.createElement('div');
            card.className = 'dice-card';
            
            if (reward.element) {
                // Element reward
                card.innerHTML = `
                    <h4>${reward.name}</h4>
                    <p>${reward.description}</p>
                    <p><strong>Rarity: ${reward.rarity}</strong></p>
                    <button class="use-btn">Add to Inventory</button>
                `;
                
                card.querySelector('.use-btn').addEventListener('click', () => {
                    // Add element to inventory
                    if (!gameState.discoveredElements.includes(reward.element)) {
                        gameState.discoveredElements.push(reward.element);
                        gameState.userElements.push({
                            name: reward.element,
                            rarity: reward.rarity,
                            description: reward.description
                        });
                        
                        showMessage(`Added ${reward.element} to your inventory!`, 'success');
                        renderElements();
                        updateStats();
                        card.remove();
                    } else {
                        showMessage(`You already have ${reward.element}`, 'error');
                    }
                });
            } else if (reward.type === 'xp') {
                // XP reward
                card.innerHTML = `
                    <h4>${reward.name}</h4>
                    <p>${reward.description}</p>
                    <button class="use-btn">Claim XP</button>
                `;
                
                card.querySelector('.use-btn').addEventListener('click', () => {
                    addXp(reward.value);
                    showMessage(`Gained ${reward.value} XP!`, 'success');
                    card.remove();
                });
            } else if (reward.type === 'points') {
                // Points reward
                card.innerHTML = `
                    <h4>${reward.name}</h4>
                    <p>${reward.description}</p>
                    <button class="use-btn">Claim Points</button>
                `;
                
                card.querySelector('.use-btn').addEventListener('click', () => {
                    gameState.score += reward.value;
                    gameState.sessionScore += reward.value;
                    showMessage(`Gained ${reward.value} points!`, 'success');
                    updateStats();
                    card.remove();
                });
            } else if (reward.type === 'charm') {
                // Charm reward (placeholder)
                card.innerHTML = `
                    <h4>${reward.name}</h4>
                    <p>${reward.description}</p>
                    <button class="use-btn">Activate Charm</button>
                `;
                
                card.querySelector('.use-btn').addEventListener('click', () => {
                    showMessage('Lucky charm activated! Your next combination has increased rarity chance.', 'success');
                    card.remove();
                });
            }
            
            diceCardsContainer.appendChild(card);
        }

        // Update dice timer
        function updateDiceTimer() {
            const now = Date.now();
            const timeSinceLastRoll = now - gameState.lastDiceRoll;
            
            if (timeSinceLastRoll < 10000 && gameState.lastDiceRoll !== 0) {
                const timeLeft = 10000 - timeSinceLastRoll;
                const secondsLeft = Math.ceil(timeLeft / 1000);
                diceTimer.textContent = `Next roll in ${secondsLeft} second(s)`;
                diceBtn.disabled = true;
                
                // Update timer every second
                setTimeout(updateDiceTimer, 1000);
            } else {
                diceTimer.textContent = 'Ready to roll!';
                diceBtn.disabled = false;
            }
        }

        // Create special effects
        function createSpecialEffects() {
            const effect = document.createElement('div');
            effect.className = 'special-effects';
            effect.style.left = `${Math.random() * window.innerWidth}px`;
            effect.style.top = `${Math.random() * window.innerHeight}px`;
            effect.style.background = `radial-gradient(circle, rgba(100, 100, 100, 0.7) 0%, rgba(0,0,0,0) 70%)`;
            effect.style.width = '100px';
            effect.style.height = '100px';
            
            document.body.appendChild(effect);
            
            setTimeout(() => {
                effect.remove();
            }, 1000);
        }

        // Show message
        function showMessage(message, type) {
            resultMessage.textContent = message;
            resultMessage.className = `message ${type}`;
            
            setTimeout(() => {
                resultMessage.className = '';
            }, 3000);
        }

        // Render elements
        function renderElements() {
            // Clear containers
            userElementsContainer.innerHTML = '';
            allElementsContainer.innerHTML = '';
            
            // Add user elements
            gameState.userElements.forEach(element => {
                const elementEl = createElement(element.name, true, element.rarity, element.description);
                userElementsContainer.appendChild(elementEl);
            });
            
            // Add all elements (view only)
            const allElements = [...starterElements, ...gameState.userElements];
            allElements.forEach(element => {
                const elementEl = createElement(element.name, false, element.rarity, element.description);
                allElementsContainer.appendChild(elementEl);
            });
        }

        // Render quick craft recipes
        function renderQuickCraft() {
            quickCraftContainer.innerHTML = '';
            
            quickCraftRecipes.forEach(recipe => {
                const recipeEl = document.createElement('div');
                recipeEl.className = 'quick-craft-item';
                
                // Check if user has required elements
                const hasElements = recipe.elements.every(element => 
                    gameState.discoveredElements.includes(element)
                );
                
                if (!hasElements) {
                    recipeEl.classList.add('disabled');
                }
                
                recipeEl.innerHTML = `
                    <h4>${recipe.name}</h4>
                    <p>${recipe.elements.join(' + ')}</p>
                    <small>${recipe.description}</small>
                `;
                
                if (hasElements) {
                    recipeEl.addEventListener('click', () => {
                        // Clear drop zones
                        clearDropZone(dropZone1);
                        clearDropZone(dropZone2);
                        
                        // Add elements to drop zones
                        addElementToDropZone(dropZone1, recipe.elements[0]);
                        addElementToDropZone(dropZone2, recipe.elements[1]);
                        
                        showMessage(`Added ${recipe.elements.join(' and ')} to crafting area!`, 'success');
                    });
                }
                
                quickCraftContainer.appendChild(recipeEl);
            });
        }

        // Render achievements
        function renderAchievements() {
            achievementsContainer.innerHTML = '';
            
            achievements.forEach(achievement => {
                const achievementEl = document.createElement('div');
                achievementEl.className = 'achievement';
                
                if (gameState.achievements.includes(achievement.id)) {
                    achievementEl.classList.add('unlocked');
                }
                
                achievementEl.innerHTML = `
                    <h4>${achievement.name}</h4>
                    <p>${achievement.description}</p>
                `;
                
                achievementsContainer.appendChild(achievementEl);
            });
        }

        // Render crafting history
        function renderHistory() {
            historyContainer.innerHTML = '';
            
            if (gameState.craftingHistory.length === 0) {
                historyContainer.innerHTML = '<p>No crafting history yet. Combine some elements!</p>';
                return;
            }
            
            gameState.craftingHistory.forEach(entry => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <strong>${entry.elements.join(' + ')}</strong> → ${entry.result} <small>(${entry.timestamp})</small>
                `;
                historyContainer.appendChild(historyItem);
            });
        }

        // Create element DOM element
        function createElement(name, draggable = true, rarity = 'common', description = '') {
            const element = document.createElement('div');
            element.className = `element ${rarity}`;
            element.textContent = name;
            
            // Create tooltip
            const tooltip = document.createElement('div');
            tooltip.className = 'element-tooltip';
            tooltip.innerHTML = `
                <strong>${name}</strong><br>
                Rarity: ${rarity}<br>
                Difficulty: ${getDifficultyForRarity(rarity)}<br>
                ${description}
            `;
            element.appendChild(tooltip);
            
            if (draggable) {
                element.setAttribute('draggable', 'true');
                element.addEventListener('dragstart', e => {
                    e.dataTransfer.setData('text/plain', name);
                });
                
                // Click to add to drop zone
                element.addEventListener('click', () => {
                    if (!dropZone1.querySelector('.element')) {
                        addElementToDropZone(dropZone1, name);
                    } else if (!dropZone2.querySelector('.element')) {
                        addElementToDropZone(dropZone2, name);
                    } else {
                        showMessage('Both drop zones are full. Clear one first.', 'error');
                    }
                });
            } else {
                element.classList.add('view-only');
            }
            
            // Add rarity badge for rare+ elements
            if (rarity !== 'common') {
                const badge = document.createElement('div');
                badge.className = 'rarity-badge';
                badge.textContent = rarity.charAt(0).toUpperCase();
                element.appendChild(badge);
            }
            
            return element;
        }

        // Get difficulty for rarity
        function getDifficultyForRarity(rarity) {
            switch(rarity) {
                case 'common': return 'Easy';
                case 'uncommon': return 'Medium';
                case 'rare': return 'Hard';
                case 'epic': return 'Very Hard';
                case 'legendary': return 'Extreme';
                case 'mythical': return 'Legendary';
                case 'gold': return 'Mythic';
                case 'diamond': return 'Godlike';
                case 'elemental': return 'Impossible';
                case 'dem-studios': return 'Secret';
                case 'studio-14592': return 'Secret';
                default: return 'Easy';
            }
        }

        // Update stats
        function updateStats() {
            totalElementsEl.textContent = Object.keys(combinations).length + starterElements.length;
            userElementsEl.textContent = gameState.userElements.length;
            combinationsEl.textContent = gameState.combinationsMade;
            sessionScoreEl.textContent = gameState.sessionScore;
        }

        // Save game state to localStorage
        function saveGameState() {
            localStorage.setItem('infiniteCraftSave', JSON.stringify(gameState));
        }

        // Load game state from localStorage
        function loadGameState() {
            const saved = localStorage.getItem('infiniteCraftSave');
            if (saved) {
                try {
                    const parsed = JSON.parse(saved);
                    gameState = { ...gameState, ...parsed };
                } catch (e) {
                    console.error('Failed to load game state:', e);
                }
            } else {
                // Initialize with starter elements
                gameState.userElements = [...starterElements];
                gameState.discoveredElements = starterElements.map(e => e.name);
            }
        }

        // Export game data as JSON
        function exportGameData() {
            const dataStr = JSON.stringify(gameState, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'infinite-craft-save.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showMessage('Game data exported!', 'success');
        }

        // Reset game
        function resetGame() {
            if (confirm('Are you sure you want to reset your progress? This cannot be undone.')) {
                gameState = {
                    userElements: [...starterElements],
                    discoveredElements: starterElements.map(e => e.name),
                    combinationsMade: 0,
                    score: 0,
                    xp: 0,
                    level: 1,
                    diceRolls: [],
                    lastDiceRoll: 0,
                    sessionScore: 0,
                    rainbowMode: false,
                    achievements: [],
                    craftingHistory: []
                };
                
                localStorage.removeItem('infiniteCraftSave');
                renderElements();
                renderQuickCraft();
                renderAchievements();
                renderHistory();
                updateStats();
                clearDropZone(dropZone1);
                clearDropZone(dropZone2);
                newElementDisplay.textContent = '';
                resultMessage.textContent = 'Drag two elements to the boxes above and click Combine!';
                
                // Remove rainbow mode
                document.body.classList.remove('rainbow-mode');
                const rainbowElements = document.querySelectorAll('.rainbow-mode');
                rainbowElements.forEach(el => {
                    el.classList.remove('rainbow-mode');
                });
                
                showMessage('Game reset!', 'success');
            }
        }

        // Initialize the game when page loads
        window.addEventListener('DOMContentLoaded', initGame);
        
        // Auto-save when page is about to unload
        window.addEventListener('beforeunload', saveGameState);
    </script>
</body>
</html>
